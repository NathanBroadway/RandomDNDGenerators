using System.Collections.Generic;
using StringFilter;

namespace SupportClasses
{
    public class Drink : BaseItem
    {

        public string Container { get; set; }
        public string DrinkEffect { get; set; }
        public string FlavorText { get; set; }
        public string DrinkColor { get; set; }

        public Drink(string drinkName, string drinkColor, string flavorText, string drinkEffect, string container, string costGP)
        {
            Category = "Tavern";
            Name = drinkName;
            DrinkColor = drinkColor;
            FlavorText = flavorText;
            DrinkEffect = drinkEffect;
            Container = container;
            CostGP = SetCostGP(costGP);
        }

        public override string Stringify() { return $"{Name} served in a {Container}: {GetCostGP(out var coin)} {coin}\n\tDescription: {DrinkColor}. {FlavorText}\n\t{SpecialEffect()}"; }

        private string SpecialEffect()
        {
            if (!DrinkEffect.Contains("{{")) return DrinkEffect;

            var effect = DrinkEffect;
            if (effect.Contains("{{RandomLanguage}}"))
            {
                var languages = new List<string> { "Dwarvish", "Elvish", "Giant", "Gnomish", "Goblin", "Halfling", "Orc", "Abyssal", "Celestial", "Draconic", "Deep Speech", "Infernal", "Primordial", "Sylvan", "Undercommon", "Auran", "Ignan", "Terran", "Aquan", "Aaracokra", "Blink Dog", "Bullywug", "Giant Eagle", "Giant Elk", "Giant Owl", "Gith", "Gnoll", "Grell", "Hook Horror", "Ice Toad", "Ixitxachitl", "Kruthik", "Minotaur", "Modron", "Otyugh", "Sahuagin", "Slaad", "Sphinx", "Thrikreen", "Tlincalli", "Troglodyte", "Umber Hulk", "Vegepygmy", "Winter Wolf", "Worg", "Yeti" };
                effect = effect.Replace("{{RandomLanguage}}", languages[DiceRoller.Roll(0, languages.Count - 1)]);
            }
            else if (effect.Contains("{{HellfireWhisky}}"))
            {
                var whiskey = new List<string> { "You drop to 0 HP and begin rolling Death Saving Throws.", "You have a -3 to Intelligence based checks for the next 2 hours.", "You have a -3 to Intelligence based checks for the next 2 hours.", "You have a -3 to Intelligence based checks for the next 2 hours.", "You have a -3 to Intelligence based checks for the next 2 hours.", "You have a -3 to Intelligence based checks for the next 2 hours.", "You have a -3 to Intelligence based checks for the next 2 hours.", "You have a -3 to Intelligence based checks for the next 2 hours.", "You have a -3 to Intelligence based checks for the next 2 hours.", "You feel a slight buzz.", "You feel a slight buzz.", "You feel a slight buzz.", "You feel a slight buzz.", "You feel a slight buzz.", "You feel a slight buzz.", "You feel a slight buzz.", "You feel a slight buzz.", "You feel a slight buzz.", "You feel a slight buzz.", "You feel a slight buzz." };
                effect = effect.Replace("{{HellfireWhisky}}", whiskey[DiceRoller.Roll(0, whiskey.Count - 1)]);
            }
            else if (effect.Contains("{{HopSkipGoNaked}}"))
            {
                var carousing = new List<string> { "You wake up in jail, pending charges for a serious crime (Treason, sedition, grand larceny, etc.). You actually did it.", "You wake up in jail, pending charges for a serious crime (Treason, sedition, grand larceny, etc.). You didn’t do it.", "You wake up in jail on minor charges. Pay 10gp for bail or spend {{Rand1-4}} days behind bars.", "You wake up in jail on minor charges. Pay 10gp for bail or spend {{Rand1-4}} days behind bars. Also, your cellmate is an NPC you previously made enemies with.", "You wake up in jail on minor charges. Pay 10gp for bail or spend {{Rand1-4}} days behind bars. Also, your cellmate is an NPC you previously befriended.", "You wake up in bed with an NPC you previously made enemies with.", "You wake up in bed with an NPC you previously made friends with.", "You wake up in bed with a total stranger when they wake up, they are {{RandDisposition}}", "You wake up in bed with the spouse of an NPC you previously made friends with.", "You wake up in bed with the spouse of an NPC you previously made enemies with.", "You wake up in bed with the spouse of an important local noble or official.", "You wake up in a strange bed with no one, you can hear the family downstairs calling for the constables.", "You wake up in a strange bed with no one. A moment later, a middle aged man invites you down for breakfast. He and his family know you by name and no one seems to find your presence unusual.", "You wake up in a strange bed with no one, but there is a scent of long rotting flesh coming from under the mattress.", "You wake up chained to a strange bed. A large man in leather comes to release you and shyly asks that you join him for breakfast.", "You wake up on the floor of a seedy club. Looks like it was amateur night. Your clothing is in a pile in the corner and you don’t know where the g-string came from, but you have an extra {{Rand1-10+Rand1-10+Rand1-10}} cp.", "You wake up on the floor of a seedy club. Looks like it was amateur night. Your clothing is in a pile in the corner and you don’t know where the g-string came from, but you have an extra {{Rand1-10+Rand1-10}} cp and a token of admiration from an influential NPC.", "You wake up on the floor of a seedy club. Looks like it was amateur night. Your clothing is in a pile in the corner and you don’t know where the g-string came from, but you have an extra {{Rand1-10+Rand1-10}} cp and a token of admiration from an influential NPC’s spouse.", "You wake up on the floor of a seedy club. Looks like it was amateur night. Your clothing is in a pile in the corner and you don’t know where the g-string came from, but you have an extra {{Rand1-10}} cp and a sympathy breakfast courtesy of the cleaning staff.", "You wake up on the floor of a seedy club. Looks like it was amateur night. Your clothing is in a pile in the corner and you don’t know where the g-string came from, but you have an extra {{Rand1-10}} gp and an invitation to attend a private, VIPs only gathering at an influential NPCs estate. (A leather animal mask will arrive wherever the PC is staying shortly.)", "You wake up in bed in an unfamiliar inn, the stranger next to you is {{RandAppearance}}.", "You wake up in bed in an unfamiliar inn, the stranger next to you is {{RandAppearance}}.", "You wake up in bed in an unfamiliar inn, the stranger next to you is {{RandAppearance}}.", "You wake up in your bed. You are wearing a full face of makeup and there are {{Rand1-4}} gp on the nightstand.", "You wake up in your bed. You would get up, but you are tied to it with leather straps.", "You wake up in your bed. A dog you have never seen before is licking your left foot.", "You wake up in your bed. On you is a document from a local judge stating that you have legally changed your name to the same name as one of your fellow party members.", "You wake up in your bed. On you is a document from a local judge stating that you have legally changed your name to the same name as your worst NPC enemy.", "You wake up in your bed. On you is a ‘Thank you’ note from an important local official, noble, or organization. It does not make any mention of what they are thanking you for.", "You wake up in your bed. You are spooning a whole ham. The ham is wearing a nightgown and lipstick.", "You wake up in your bed. You are spooning someone who looks almost exactly like you.", "You wake up in your bed. You are dressed as a member of the local watch. A man in his underwear is hogtied at the foot of your bed.", "You wake up in your bed. You are wearing a large hat, fake nose, and moustache. Walking around town later, you see a large number of wanted posters. The person depicted looks a lot like you. Only they have a bigger nose. And a moustache. And a hat.", "You wake up in your bed. You are {{Rand1-6+Rand1-6}} gp poorer. Within the hour, 300 freshly baked pastries are delivered.", "You wake up in your bed. You are {{Rand1-20}} gp poorer, but now have {{Rand1-10}} very fine hats.", "You wake up in your bed. You are {{Rand1-10}} gp richer and cradling a trophy with a giant pie on top. You have never felt more sick to your stomach.", "You wake up in your bed. You are {{Rand1-20}} gp poorer. Everything else seems normal, until the life size, lifelike bust of you carved from cheese is delivered.", "You wake up in your bed. You are {{Rand1-20+Rand1-20+Rand1-20}} gp poorer. Running around your room is a shocker lizard wearing a collar. It seems to be slightly domesticated.", "You wake up in your bed. You are wearing a very respectable suit. In your breast pocket is a folded stack of papers indicating that you have been elected to some minor local political position. (Ex: Town Cattle Inspector, District Cheese Quality Controller, etc.)", "You wake up in your bed. Everything seems normal. Soon a paladin arrives and tells you how glad he is that you helped him break all those vows last night. When asked which vows, he just winks and says, ‘Oh, you know.’", "You wake up in your bed. Everything seems normal. Soon a passive aggressive note is delivered explaining how in your intoxicated state, you wound up on the bad side of a middling local organization. (Scrivener’s Guild, Esoteric Brotherhood of the Fish Mongers, town chapter of the Rotary Club, Home Owner’s Association, whatever. They will probably not attempt to harm the PC, but they may try to foil them in petty ways whenever the PC is in the area.)", "You wake up in your bed. Take the cost of your armor type (non-magical), multiply it by {{Rand1-4}}, but you have {{Rand1-4}}cosmetically identical suits of armor to what your wearing in different colors.", "You wake up in your bed. You are {{Rand1-10}} gp poorer and have numerous bruises of unknown origin.", "You wake up in your bed. Your knuckles are bruised, bloodied, and full of splinters. Your pockets are filled with fresh produce. You have a vague memory of a fruit cart looking at you funny.", "You wake up in your bed. From the corner of your room, you hear the sound of awful crying. It’s a baby.", "You wake up in your bed. You are wearing a suit cobbled together from bits and pieces of the skins of various animals. Later in the day, you hear stories of how some clawed, antlered monster was seen peeping in windows and climbing on roofs throughout the night.", "You wake up in your bed. At your feet, you see {{Rand1-6+Rand1-6+Rand1-6+Rand1-6}} mice standing on their hind legs watching you. As soon as you stir, they scatter, leaving behind what appears to be a tiny altar with offerings of bread crust and cheese crumbles. One lock of your hair is now shorter than the rest.", "You wake up on the floor of your room. In your bed, there are {{Rand1-4+Rand1-4}} sleeping prostitutes. You are still fully clothed and unsticky.", "You wake up on the floor of your room. In your bed is a sleeping pig. The pig is covered in lipstick marks. Your face is also smeared with lipstick.", "You wake up on the floor of your room. You are covered in dirt and mud. On your bed is a freshly exhumed corpse.", "You wake up on the floor of your room. All the furniture and rugs have been moved up against the walls. In the center is a crudely drawn summoning circle ringed with the remains of black candles. At the center of the circle is a really fantastic looking sandwich.", "You wake up in a temple. Several monks have gathered around you and are praying for your soul.", "You wake up in a temple. In a coffin. Several monks are standing over you offering a pauper’s last rites. They seem surprised when you start moving.", "You wake up in a temple. You are wearing a fine suit. By the altar is a coffin, the corpse inside is wearing your clothes.", "You wake up in a temple. In the confessional. Naked. Services are beginning.", "You wake up in a temple. In the confessional. Naked. Someone enters the other side and begins confessing their sins.", "You wake up in a temple. In holy vestments. Crowds have begun gathering for service.", "You wake up in a temple naked behind the altar. The first of the faithful are starting to enter for services. Someone has defecated in the offering dish.", "You wake up in the woods {{Rand1-4}} miles from where you last remember being. You are naked and armed only with a wooden spear hastily carved from a sapling.", "You wake up in the woods {{Rand1-4}} miles from where you last remember being. You are unarmed and only wearing one boot. A wolverine has the other.", "You wake up in the woods {{Rand1-4}} miles from where you last remember being. You are in the middle of a perfect circle of trees, naked save for the freshly flayed skin of a lamb.", "You wake up in the woods {{Rand1-4}} miles from where you last remember being. You head seems to be stuck in some kind of no-kill trap.", "You wake up in the woods {{Rand1-4}} miles from where you last remember being. You are at the bottom of a deep pit trap. Two gap-toothed yokels are leering down at you.", "You wake up in the woods {{Rand1-4}} miles from where you last remember being. You are holding a bear cub.", "You wake up in the woods {{Rand1-4}} miles from where you last remember being. {{Rand1-12+Rand1-12+Rand1-12}} miconids are standing in a circle around you, singing a song you vaguely remember being soothed by in early childhood.", "You wake up in humble country a barn. A slightly homely girl is asleep on the hay beside you. Someone is opening the front door.", "You wake up in a nobleman’s barn. You are wearing a saddle and there are whip marks on your buttocks. You are {{Rand1-10}} gp richer.", "You wake up in an alley. {{Rand1-6}} hobos are wearing {{Rand1-6}} articles of your clothing.", "You wake up in an alley. A group of local children are poking you with sticks and arguing about whether or not you’re dead.", "You wake up in an alley. A group of urchins are standing over you and arguing about how to split your money or how much they could sell your hair for if they shaved you.", "You wake up in an alley. Your left ass cheek hurts. It now bears a lifelike tattoo of an NPC you have befriended in the past.", "You wake up in an alley. Your left ass cheek hurts. It now bears a lifelike tattoo of an NPC you have made enemies with in the past.", "You wake up in an alley. There is a dead body next to you.", "You wake up in an alley. Your clothing is splattered in blood and you are carrying a sack with {{Rand1-10}} gp worth of an illegal substance.", "You wake up in a sumptuous bed in a beautiful hotel. Along with the room service breakfast of caviar and sparkling wine comes the bill. Pay {{Rand1-10+Rand1-10}} gp or find a way out.", "You wake up in a sumptuous bed in a beautiful hotel. Next to you is a complete stranger. Both of you are wearing wedding bands.", "You wake up in a sumptuous bed in a beautiful hotel. You are holding a whip. Someone else is asleep suspended from the ceiling by leather straps.", "You wake up in a warehouse. It is used for fermenting fish. The smell lingers on you for {{Rand1-6}} days.", "You wake up naked in an art school. A group of aspiring painters are in a circle around you, committing your likeness to canvas.", "You wake up in the back room of an art gallery. Up front, you hear two people discussing the pairs of circles now covering all the paintings. One of them is using terms like ‘Brilliant’ and ‘Revolutionary’. Your buttocks feel uncomfortably sticky.", "You wake up naked in a fancy sculpture garden. The statues are all wearing various articles of your clothing. You can hear the sound of wealthy ladies beginning to gather for croquet.", "You wake up in the private garden of a local noble’s wife. Her favorite topiary has been re-shaped into a crude likeness of a penis. You are covered in clippings.", "You wake up in the main square at the feet of a bronze statue of the city’s founder. You and the statue are wearing matching outfits. You have in your possession {{Rand1-10}} pairs of ladies’ underwear of unknown origin.", "You wake up in the common room of an impoverished orphanage. You hear the voices of children around you. They are talking about how you ate the last of the cookies.", "You wake up behind a stack of hay bales in the stable of an inn. On the other side of the stack, the innkeeper is interrogating the stable boy about why all the horses are wearing makeup and the oxen have bonnets.", "You wake up on the edge of a field. You are wearing a heavy full-body suit made from the skin of a bear. From the sound of things, the annual Town Watch vs Paladin’s Order Tackleball game is about to start.", "You wake up on the front steps of the local administrative building. You are wearing war paint and a bandana. A treatise of radical political and religious ideologies has been nailed to the door.", "You wake up behind a tailor’s shop. You are wearing a ball gown made for a noblewoman. The rest of your clothing is missing.", "You wake up in an alchemist’s shop. There are a number of empty vials on the floor around you. For the next {{Rand1-6+Rand1-6}} days, everything that should be green looks purple and food tastes like it’s vibrating. Occasionally, you burp multi-colored bubbles.", "You wake up in a crypt. You hear retreating footsteps as one person complains to another that nothing makes him go soft faster than realizing they’re still alive.", "You wake up in a closed coffin, crammed in next to you is someone recently deceased. Outside, you hear the sounds of a funeral service.", "You wake up in the communal lodge of a fraternal order. You clothing and all exposed skin are now covered in crudely drawn pictures of genitalia. (Ink takes {{Rand1-6}} days or {{Rand1-12+Rand1-12}} washes to fade completely.)", "You wake up in the communal lodge of a sororal order. You are wearing feathers, lace, and a full face of makeup. Your buttock is sore and bears bruises in the same shapes as the cutouts on that paddle hanging above the fireplace.", "You wake up in the communal lodge of an esoteric order. The room is full of burned out candles. There is a pen in your hand and a note, but the handwriting isn’t yours. It is a letter to you from a long-dead friend or relative detailing fond memories or talking about how well or poorly you are doing carrying on the family legacy.", "You wake up in the office of the dean of the local bardic college. You are wearing an immaculate suit. Moments later, the first in a line of students outside enters to begin their admission interview.", "You wake up in a cozy bed in the groundskeeper’s cottage on a wealthy noble’s estate. You have a number of bound minor wounds and on the nearest chair is a suit made from fox skins that looks to have been savaged by dogs. Waiting for you on the table are a warm pot of tea, {{Rand1-10+Rand1-10+Rand1-10+Rand1-10}}gp in a bag, and a ‘Thank you’ note.", "You wake up in the hut of a local witch. Her cauldron is upended and it looks as though much of the content has been drunk. You are now {{RandWitchEffect}}. You will remain this way for {{Rand1-12}} hours.", "You wake up in the tower of a local wizard. You seem to have broken his enchanted celestial mapping device by putting your head through it. It will now only tell him what is visible in the night sky relative to the location of your head.", "You wake up to find yourself seated at a table. There is a quill in one hand and a small cut on the other. Across from you sits a well-dressed but sinister man, a man of wealth and taste. In front of you is a contract detailing in extremely complex terms, the exchange of power for your immortal soul. (Once the contract is signed or if the PC refuses, the man disappears in a cloud of sulfurous smoke.)" };
                effect = effect.Replace("{{HopSkipGoNaked}}", carousing[DiceRoller.Roll(0, carousing.Count - 1)]);
            }
            else if (effect.Contains("{{Ouzo}}"))
            {
                var ouzo = new List<string> { "you gain 2 points of Intelligence.", "you gain 2 points of Wisdom.", "you believe you have the maximum possible Intelligence and Wisdom.", "you believe you have the maximum possible Intelligence and Wisdom." };
                effect = effect.Replace("{{Ouzo}}", ouzo[DiceRoller.Roll(0, ouzo.Count - 1)]);
            }
            else if (effect.Contains("{{ShirleyTempleofElementalEvil}}"))
            {
                var ShirleyTempleofElementalEvil = new List<string> { "You can see your breath as you begin to feel bitterly cold. Take {{Rand1-4}} cold damage each round for 1 minute.", "You find it hard to breathe as the air in your lungs goes stale. You have a -2 to Constiturion checks and saves for the next {{Rand1-4}} hour(s).", "Your body bursts into flame, taking {{Rand1-10}} of damage every turn until an action is use to put out the fire.", "You feel your body become incredibly heavy as if weighed down by rocks. Your movement is halved for the next {{Rand1-20}} hour(s).", "Nothing happens.", "Nothing happens.", "Nothing happens.", "Nothing happens.", "Nothing happens.", "Nothing happens.", "Nothing happens.", "Nothing happens.", "Nothing happens.", "Nothing happens.", "Nothing happens.", "Nothing happens.", "Nothing happens.", "Nothing happens.", "Nothing happens.", "Nothing happens." };
                effect = effect.Replace("{{ShirleyTempleofElementalEvil}}", ShirleyTempleofElementalEvil[DiceRoller.Roll(0, ShirleyTempleofElementalEvil.Count - 1)]);
            }
            else if (effect.Contains("{{PlanarGuide}}"))
            {
                var planarGuide = new List<string> { "The 9th Level of Hell: suffer {{Rand1-8}} psychic damage as you see the most terrible things imaginable.", "The 9th Level of Hell: suffer {{Rand1-8}} psychic damage as you see the most terrible things imaginable.", "The 9th Level of Hell: suffer {{Rand1-8}} psychic damage as you see the most terrible things imaginable.", "The Void: you feel an emptiness within your being for the remainder of your character's life, roleplay appropriately.", "The Void: you feel an emptiness within your being for the remainder of your character's life, roleplay appropriately.", "Valhalla: You witness and take part in a great battle in a heavenly place. You get a +2 to all Strength checks for the next 24 hours.", "Valhalla: You witness and take part in a great battle in a heavenly place. You get a +2 to all Strength checks for the next 24 hours.", "Gaia: Your consciousness returns to the collective unconscious that is the world you live on. Ask your DM a single question about the campaign, world, or adventure, they must answer truthfully." };
                effect = effect.Replace("{{PlanarGuide}}", planarGuide[DiceRoller.Roll(0, planarGuide.Count - 1)]);
            }

            if (effect.Contains("{{RandDisposition}}"))
            {
                var disposition = new List<string> { "Friendly towards you.", "Neutral towards you.", "Hostile towards you.", "Disgusted with you.", "Frightened by you.", "In love with you." };
                effect = effect.Replace("{{RandDisposition}}", disposition[DiceRoller.Roll(0, disposition.Count - 1)]);
            }
            else if (effect.Contains("{{RandAppearance}}"))
            {
                var disposition = new List<string> { "Unattractive", "Incredibly Ugly", "Unspeakly Hideous", "Good Looking", "Gorgeous", "Way Out of Your League (You should probably see yourself out before they wake up)", "a Goat", "a Pig", "a Miniature Donkey" };
                effect = effect.Replace("{{RandAppearance}}", disposition[DiceRoller.Roll(0, disposition.Count - 1)]);
            }
            else if (effect.Contains("{{RandWitchEffect}}"))
            {
                var disposition = new List<string> { "green and slimey", "1/10 your original size", "a toad", "covered entirely in fur", "walking around on giant chicken feet", "modular (your body parts are all easily removable but can be harmlessly snapped back into place. They're also scattered around the house)" };
                effect = effect.Replace("{{RandWitchEffect}}", disposition[DiceRoller.Roll(0, disposition.Count - 1)]);
            }

            effect = effect.Replace("{{Rand1-4}}", DiceRoller.Roll(1, 4).ToString());
            effect = effect.Replace("{{Rand1-4+Rand1-4}}", (DiceRoller.Roll(1, 4) + DiceRoller.Roll(1, 4)).ToString());
            effect = effect.Replace("{{Rand1-5}}", DiceRoller.Roll(1, 5).ToString());
            effect = effect.Replace("{{Rand1-6}}", DiceRoller.Roll(1, 6).ToString());
            effect = effect.Replace("{{Rand1-6+Rand1-6}}", (DiceRoller.Roll(1, 6) + DiceRoller.Roll(1, 6)).ToString());
            effect = effect.Replace("{{Rand1-6+Rand1-6+Rand1-6}}", (DiceRoller.Roll(1, 6) + DiceRoller.Roll(1, 6) + DiceRoller.Roll(1, 6)).ToString());
            effect = effect.Replace("{{Rand1-8}}", DiceRoller.Roll(1, 8).ToString());
            effect = effect.Replace("{{Rand1-10}}", DiceRoller.Roll(1, 10).ToString());
            effect = effect.Replace("{{Rand1-10+Rand1-10+Rand1-10+Rand1-10}}", (DiceRoller.Roll(1, 10) + DiceRoller.Roll(1, 10) + DiceRoller.Roll(1, 10) + DiceRoller.Roll(1, 10)).ToString());
            effect = effect.Replace("{{Rand1-12}}", DiceRoller.Roll(1, 12).ToString());
            effect = effect.Replace("{{Rand1-20}}", DiceRoller.Roll(1, 20).ToString());
            return effect;
        }
    }
}